{"ast":null,"code":"import \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.array.for-each.js\";\nimport \"core-js/modules/es.array.index-of.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.set.js\";\nimport \"core-js/modules/es.set.difference.v2.js\";\nimport \"core-js/modules/es.set.intersection.v2.js\";\nimport \"core-js/modules/es.set.is-disjoint-from.v2.js\";\nimport \"core-js/modules/es.set.is-subset-of.v2.js\";\nimport \"core-js/modules/es.set.is-superset-of.v2.js\";\nimport \"core-js/modules/es.set.symmetric-difference.v2.js\";\nimport \"core-js/modules/es.set.union.v2.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport { toRefs, computed, ref, watchEffect } from \"vue\";\nimport { debounce } from \"../../_utils/debounce.js\";\nimport { isUndefined } from \"../../_utils/is.js\";\nfunction useFilterTreeNode(props) {\n  var _toRefs = toRefs(props),\n    searchValue = _toRefs.searchValue,\n    flattenTreeData = _toRefs.flattenTreeData,\n    propFilterMethod = _toRefs.filterMethod,\n    disableFilter = _toRefs.disableFilter,\n    fieldNames = _toRefs.fieldNames;\n  var keyField = computed(function () {\n    var _a;\n    return ((_a = fieldNames.value) == null ? void 0 : _a.key) || \"key\";\n  });\n  var defaultFilterMethod = function defaultFilterMethod(keyword, node) {\n    var key = node[keyField.value];\n    return !isUndefined(key) && String(key).indexOf(keyword) > -1;\n  };\n  var filterMethod = computed(function () {\n    return (propFilterMethod == null ? void 0 : propFilterMethod.value) || defaultFilterMethod;\n  });\n  var filteredKeysSet = ref();\n  var isFiltering = computed(function () {\n    return !!searchValue.value;\n  });\n  var isEmptyFilterResult = computed(function () {\n    return !(disableFilter == null ? void 0 : disableFilter.value) && isFiltering.value && filteredKeysSet.value && filteredKeysSet.value.size === 0;\n  });\n  var filterTreeNode = computed(function () {\n    return (disableFilter == null ? void 0 : disableFilter.value) ? void 0 : function (node) {\n      var _a, _b;\n      if (!isFiltering.value) return true;\n      var key = node[keyField.value];\n      return (_b = (_a = filteredKeysSet.value) == null ? void 0 : _a.has(key || \"\")) != null ? _b : false;\n    };\n  });\n  var updateFilteredKeysSet = debounce(function (treeData, keyword) {\n    var hitNodes = treeData.filter(function (node) {\n      return filterMethod.value(keyword, node.treeNodeData);\n    });\n    var _keysSet = /* @__PURE__ */new Set();\n    hitNodes.forEach(function (node) {\n      _keysSet.add(node.key);\n      node.pathParentKeys.forEach(function (_key) {\n        _keysSet.add(_key);\n      });\n    });\n    filteredKeysSet.value = _keysSet;\n  }, 100);\n  watchEffect(function () {\n    if (disableFilter == null ? void 0 : disableFilter.value) {\n      filteredKeysSet.value = void 0;\n    } else {\n      updateFilteredKeysSet(flattenTreeData.value, searchValue.value);\n    }\n  });\n  return {\n    isEmptyFilterResult: isEmptyFilterResult,\n    filterTreeNode: filterTreeNode\n  };\n}\nexport { useFilterTreeNode as default };","map":{"version":3,"names":["toRefs","computed","ref","watchEffect","debounce","isUndefined","useFilterTreeNode","props","_toRefs","searchValue","flattenTreeData","propFilterMethod","filterMethod","disableFilter","fieldNames","keyField","_a","value","key","defaultFilterMethod","keyword","node","String","indexOf","filteredKeysSet","isFiltering","isEmptyFilterResult","size","filterTreeNode","_b","has","updateFilteredKeysSet","treeData","hitNodes","filter","treeNodeData","_keysSet","Set","forEach","add","pathParentKeys","_key","default"],"sources":["D:/OJ/foreveroj-front/foreveroj-front/node_modules/@arco-design/web-vue/es/tree-select/hooks/use-filter-tree-node.js"],"sourcesContent":["import { toRefs, computed, ref, watchEffect } from \"vue\";\nimport { debounce } from \"../../_utils/debounce.js\";\nimport { isUndefined } from \"../../_utils/is.js\";\nfunction useFilterTreeNode(props) {\n  const {\n    searchValue,\n    flattenTreeData,\n    filterMethod: propFilterMethod,\n    disableFilter,\n    fieldNames\n  } = toRefs(props);\n  const keyField = computed(\n    () => {\n      var _a;\n      return ((_a = fieldNames.value) == null ? void 0 : _a.key) || \"key\";\n    }\n  );\n  const defaultFilterMethod = (keyword, node) => {\n    const key = node[keyField.value];\n    return !isUndefined(key) && String(key).indexOf(keyword) > -1;\n  };\n  const filterMethod = computed(\n    () => (propFilterMethod == null ? void 0 : propFilterMethod.value) || defaultFilterMethod\n  );\n  const filteredKeysSet = ref();\n  const isFiltering = computed(() => !!searchValue.value);\n  const isEmptyFilterResult = computed(\n    () => !(disableFilter == null ? void 0 : disableFilter.value) && isFiltering.value && filteredKeysSet.value && filteredKeysSet.value.size === 0\n  );\n  const filterTreeNode = computed(\n    () => (disableFilter == null ? void 0 : disableFilter.value) ? void 0 : (node) => {\n      var _a, _b;\n      if (!isFiltering.value)\n        return true;\n      const key = node[keyField.value];\n      return (_b = (_a = filteredKeysSet.value) == null ? void 0 : _a.has(key || \"\")) != null ? _b : false;\n    }\n  );\n  const updateFilteredKeysSet = debounce(\n    (treeData, keyword) => {\n      const hitNodes = treeData.filter(\n        (node) => filterMethod.value(keyword, node.treeNodeData)\n      );\n      const _keysSet = /* @__PURE__ */ new Set();\n      hitNodes.forEach((node) => {\n        _keysSet.add(node.key);\n        node.pathParentKeys.forEach((_key) => {\n          _keysSet.add(_key);\n        });\n      });\n      filteredKeysSet.value = _keysSet;\n    },\n    100\n  );\n  watchEffect(() => {\n    if (disableFilter == null ? void 0 : disableFilter.value) {\n      filteredKeysSet.value = void 0;\n    } else {\n      updateFilteredKeysSet(flattenTreeData.value, searchValue.value);\n    }\n  });\n  return {\n    isEmptyFilterResult,\n    filterTreeNode\n  };\n}\nexport { useFilterTreeNode as default };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}